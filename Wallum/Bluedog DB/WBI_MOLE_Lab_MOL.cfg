//Adds MOLE lab to MOL

@PART[bluedog_GeminiFerry_PressurizedModule]:NEEDS[WildBlueTools]
{
	!MODULE[ModuleKerbNetAccess] {}
	!MODULE[ModuleExperienceManagement] {}
	
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchWindows]] {}

	MODULE
	{
		name = WBIConvertibleMPL
		enableLogging = True

		//Determines whether or not to show the context menu GUI
		showGUI = True

		//Some containers don't hold as much resources as the template specifies, while others hold more.
		//Since the resource templates specify base amounts, the capacity factor specifies a multiplier to
		//factor into the resource amounts.
		capacityFactor = 30

		//Crew capacity when inflated
		inflatedCrewCapacity = 1

		//Determines if the part can be reconfigured out in the field.
		fieldReconfigurable = true

		//name of the template nodes to use
		templateNodes = BDB_MOL_TEMPLATE
		templateTags = orbitalWorkshop

		//Short name of the default module template.
		//This is used when selecting the part in the editor.
		//User will then right-click on the module to change its type.
		defaultTemplate = BDB_Mol

		//Name of the logo panel transforms
		decalsVisible = false

		//If the part has a KIS container, this is the base and max amount
		baseStorage = 250
		maxStorage = 1000

		//Snacks
		resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks

		//Kerbalism
		resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen

		//TAC-LS
		resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater

		//USI-LS
		resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}

	MODULE
	{
		name = WBIPowerMonitor
	}

	MODULE
	{
		name = WBIPropStateHelper
	}

	MODULE
	{
		name = ModuleAnimateGeneric
		animationName = Acamar_Lab_1_Light
		startEventGUIName = Lights On
		endEventGUIName = Lights Off
		actionGUIName = Toggle Lights
    	defaultActionGroup = Light
	}
}


BDB_MOL_TEMPLATE
{
	author = Wallum
	name = BDB_Mol
	title = MOL Laboratory
	shortName = MOL Laboratory
	TechRequired = spaceExploration
	templateTags = orbitalWorkshop
	mass = 0.001
	requiredResource = Equipment
	requiredAmount = 2000
	reconfigureSkill = ScienceSkill
	logoPanel = WildBlueIndustries/000WildBlueTools/CommonTemplates/Decals/MOLELab
	glowPanel = WildBlueIndustries/000WildBlueTools/CommonTemplates/Decals/MOLELab
	description = The main science module of MIR, Acamar was build on the experience gained from the Salyut programme.
	toolTip = As long as you keep a crewmember in the lab and the ResearchKits full, you can conduct basic research for Science!
	toolTipTitle = Your First Acamar!
	enableMPLModules = true
	includeModuleInfo = true
	ignoreMaterialModifier = true
	
	MODULE
	{
		name = ModuleExperienceManagement
		costPerKerbal = 0
	}
			
	MODULE
	{
		name = ModuleKerbNetAccess
		MinimumFoV = 17
		MaximumFoV = 63
		AnomalyDetection = 0
		DISPLAY_MODES
		{
			Mode = Terrain
			Mode = Biome
		}
		REQUIRED_EFFECTS
		{
			Effect = ScienceSkill
		}
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Create Research Kits
		StartActionName = Start Research Kits
		StopActionName = Stop Research Kits
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		ExperienceEffect = ScienceSkill
		EfficiencyBonus = 1
		 
		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 0.5
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 15
		}

		OUTPUT_RESOURCE
		{
			ResourceName = ResearchKits
			Ratio = 0.02
			DumpExcess = false
		}
	}

	MODULE
	{
		name = WBIModuleScienceExperiment
		experimentID = WBIEmptyExperiment
		defaultExperiment = WBIEmptyExperiment
		experimentActionName = Do Nothing
		resetActionName = Reset Nothing
		useStaging = False
		useActionGroups = True
		hideUIwhenUnavailable = True
		xmitDataScalar = 0.25
		dataIsCollectable = True
		interactionRange = 1.2
		rerunnable = False
		resettable = False
		usageReqMaskInternal = 1
		usageReqMaskExternal = 8
	}

	MODULE
	{
		name = WBIModuleScienceExperiment
		experimentID = WBIEmptyExperiment
		defaultExperiment = WBIEmptyExperiment
		experimentActionName = Do Nothing
		resetActionName = Reset Nothing
		useStaging = False
		useActionGroups = True
		hideUIwhenUnavailable = True
		xmitDataScalar = 0.25
		dataIsCollectable = True
		interactionRange = 1.2
		rerunnable = False
		resettable = False
		usageReqMaskInternal = 1
		usageReqMaskExternal = 8
	}

	MODULE
	{
		name = WBIExperimentLab
		debugMode = false

		canCreateExperiments = true
		experimentCreationSkill = ScienceSkill
		minimumCreationLevel = 2
		defaultCreationResource = ResearchKits
		minimumCreationAmount = 100.0
		checkCreationResources = true

		isGUIVisible = false
		experimentID = WBISpaceResearch
		ConverterName = Lab Time
		StartActionName = Start Lab Time
		StopActionName = Stop Lab Time
		AutoShutdown = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.05
		SpecialistBonusBase = 0.05
		ExperienceEffect = ScienceSkill
		GeneratesHeat = false
		hoursPerCycle = 6
		crewsRequired = 1
		minimumSuccess = 40
		criticalSuccess = 95
		criticalFail = 20
		sciencePerCycle = 1.0
		repairSkill = ScienceSkill
		repairResource = RocketParts
		repairAmount = 150
		defaultExperiment = WBIEmptyExperiment

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 5
		}

		INPUT_RESOURCE
		{
			ResourceName = ResearchKits
			Ratio = 0.00055554
		}

		OUTPUT_RESOURCE
		{
			ResourceName = LabTime
			Ratio = 0.00056
			DumpExcess = true
		}
	}

	MODULE
	{
		name = WBIDataTransferUtility
	}    	

	RESOURCE
	{
		name = ResearchKits
		amount = 0.7 // 0.00707964601769911504424778761062
		maxAmount = 0.7 // 0.00707964601769911504424778761062
		isTweakable = true
	}   	

	RESOURCE
	{
		name = MonoPropellant
		amount = 0.3
		maxAmount = 0.3
		isTweakable = true
	}
}