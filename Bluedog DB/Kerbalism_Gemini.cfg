B9_TANK_TYPE
{
	name = WallumGeminiEC
	tankMass = 0
	tankCost = 0
	RESOURCE
	{
		name = ElectricCharge
		unitsPerVolume = 1341.5 // 110000/80
	}
}

@PART[bluedog_Gemini_EquipmentModule]:NEEDS[ProfileDefault]:FINAL
{
	!MODULE[ModuleResourceConverter]:HAS[#ConverterName[Fuel?Cell]] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelCellSwitch]] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[textureSwitchStyle]] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[volumeSwitch]] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = variantSwitchStyle
		switcherDescription = Variant
		switcherDescriptionPlural = Variants
		baseVolume = 80
		
		SUBTYPE
		{
			name = Early
			title = Early
			transform = EarlyModel
			descriptionSummary = Early frills. //Produces 40 EC per 1 kg of Monopropellant
			descriptionDetail = Lightest and cheapest option. //A simple device that consumes Monopropellant to produce EC.
			defaultSubtypePriority = 1
			tankType = WallumGeminiEC
			
			RESOURCE
			{
				name = MonoPropellant
				unitsPerVolume = 1
			}
			
			//MODULE
			//{
			//	IDENTIFIER
			//	{
			//		name = ModuleResourceConverter
			//	}

			//	moduleActive = False
			//}
			
			//addedMass = 0.05
			//addedCost = 750
		}
		SUBTYPE
		{
			name = Late
			title = Late
			transform = LateModel
			descriptionSummary = Late frills. Produces 2695 EC per 1 kg of H2/O2.
			descriptionDetail = Heavier and pricy option. Efficient fuel cell that does not consume Monopropellant. Hydrogen and Oxygen are combined to produce EC and water.
			defaultSubtypePriority = 0
			addedMass = 0.3
			addedCost = 2250
			volumeAdded = 60
			tankType = bdbSupplyH2O2
			
			RESOURCE
			{
				name = MonoPropellant
				unitsPerVolume = 1
			}
			

			//MODULE
			//{
			//	IDENTIFIER
			//	{
			//		name = ModuleResourceConverter
			//	}

			//	DATA
			//	{
			//		INPUT_RESOURCE
			//		{
			//			ResourceName = Hydrogen
			//			Ratio = 0.7
			//			FlowMode = STACK_PRIORITY_SEARCH
			//		}
			//		INPUT_RESOURCE
			//		{
			//			ResourceName = Oxygen
			//			Ratio = 0.35
			//			FlowMode = STACK_PRIORITY_SEARCH
			//		}
			//		OUTPUT_RESOURCE
			//		{
			//			ResourceName = ElectricCharge
			//			Ratio = 1.5
			//			DumpExcess = True
			//		}
			//		OUTPUT_RESOURCE
			//		{
			//			ResourceName = Water
			//			Ratio = 0.00055643
			//			DumpExcess = True
			//		}
			//	}
			//}
		}
	}
	
	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 1
		valve_i = 1 // workaround until we have a better way to deal with dump valves
	}
	
	MODULE
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.
		
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP
		{
			name = None
			desc = #KERBALISM_None_desc//Empty slot for mass and cost savings.
		}
	}

	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = ProcessController
		title = #KERBALISM_FuelCell_title//Fuel Cell
		redundancy = Power Generation
		repair = Engineer
		mtbf = 72576000
		extra_cost = 1.0
		extra_mass = 0.5
	}
}

@PART[bluedog_BigG_CylindricalSM]:NEEDS[ProfileDefault]:FINAL
{
	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 1
		valve_i = 1 // workaround until we have a better way to deal with dump valves
	}
	
	@MODULE[Configure]:HAS[#title[Fuel?Cell]]
	{
		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.
		
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}
	}
}