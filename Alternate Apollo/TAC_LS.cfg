//TAC Life Support configs

@PART[D2_pod]:NEEDS[TacLifeSupport]:AFTER[TacLifeSupport]
{
	@description ^= :$:--TAC-LS-- 18 day food supply.:
	@RESOURCE[Food]
	{
		@amount *= 6
		@maxAmount *= 6
	}
	@RESOURCE[CarbonDioxide]
	{
		@maxAmount *= 6
	}
	@RESOURCE[Waste]
	{
		@maxAmount *= 6
	}
}

@PART[D2_prop]:NEEDS[TacLifeSupport]:AFTER[TacLifeSupport]
{
	@description ^= :$: Supports 3 kerbals.:
	
	RESOURCE
    {
        name = Oxygen
        amount = 185.063  // x3 kerbals for 1 day
        @amount *= 20    // days (3 more in the pod)
        maxAmount = #$amount$
    }
	RESOURCE
    {
        name = Hydrogen
        amount = 20709.861  // fuel cell for 15 days
        maxAmount = #$amount$
    }
	@MODULE[TacGenericConverter]
	{
		@conversionRate = 3.06
	}
}

@PART[D2_prop]:NEEDS[TacLifeSupport]:AFTER[TacLifeSupport]
{
	@description ^= :$:--TAC-LS-- Hydrogen-Oxygen fuel cell produces EC and drinking water for 20 days. Also provides additional storage for breathing oxygen.:
	
	!MODULE[ModuleResourceConverter] {}
	MODULE
	{
		name = TacGenericConverter
		ConverterName = Fuel Cell
		StartActionName = Start Fuel Cell
		StopActionName = Stop Fuel Cell
		ToggleActionName = Toggle Fuel Cell
		tag = Life Support		
		GeneratesHeat = false
		conversionRate = 3.06

		INPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.007046915762
		}
		INPUT_RESOURCE
		{
			ResourceName = Hydrogen
			Ratio = 0.01392577843
		}
		
		// Meets 100% of Kerbals water needs, >180% of EC needs. DumpExcess enabled to assure both are produced.
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.0654430501 // compared to the Water Splitter, this produces 40% of the EC the Water Splitter consumes reversing the process, assuming Water Splitter Waste is Hydrogen.
			DumpExcess = true
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0000111880787
			DumpExcess = true
		}		
	}
}