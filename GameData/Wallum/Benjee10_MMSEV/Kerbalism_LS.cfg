//Kerbalism Life Support

@PART[Benjee10_MMSEV_baseHDU]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//6 month sortie for 3 kerbals
	//1 month redundancy
	
	@RESOURCE[Food]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 210
        @maxAmount *= 210
	}
	@RESOURCE[Water]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 30
        @maxAmount *= 210
	}
	@RESOURCE[Oxygen]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 210
        @maxAmount *= 210
	}
}

@PART[Benjee10_MMSEV_baseHDU]:NEEDS[ProfileDefault]:FINAL
{
	//ETS timing suggests it would have water/oxygen recylcing
	@MODULE[Configure]:HAS[#title[Pod]]
	{
		@slots = 5
	}
	
	//@MODULE[ProcessController]:HAS[#resource[_Scrubber]]
	//{
	//	@capacity = 4
	//}
	
	@MODULE[ProcessController]:HAS[#resource[_WaterRecycler]]
	{
		@capacity = 8.4
	}
	
	MODULE
	{
		name = ProcessController
		resource = _WaterElectrolysis
		title = #KERBALISM_WaterElectrolysis_title//Water electrolysis
		capacity = 0.025
	}

	MODULE
	{
		name = ProcessController
		resource = _Sabatier
		title = #KERBALISM_SabatierProcess_title//Sabatier process
		capacity = 4
		valve_i = 2 // workaround until we have a better way to deal with dump valves
	}
	
	@MODULE[Configure]:HAS[#title[Pod]]
	{
		SETUP
		{
			name = Water Electrolysis
			desc = #KERBALISM_WaterElectrolysis_desc//Split <b>Water</b> into its <b>Hydrogen</b> and <b>Oxygen</b> components.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WaterElectrolysis
				mass = 0.05
				cost = 500
			}
		}

		SETUP
		{
			name = Sabatier Process
			desc = #KERBALISM_SabatierProcess_desc//<b>Hydrogen</b> and <b>CarbonDioxide</b> react with a nickel catalyst to produce <b>Water</b> and <b>LiquidFuel</b>.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Sabatier
				mass = 0.05
				cost = 1500
			}
		}
	}
	
	RESOURCE
	{
		name = Hydrogen
		amount = 0
		maxAmount = 5000
	}
}

@PART[Benjee10_MMSEV_baseLander]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//2 month sortie for 4 kerbals
	
	@RESOURCE[Food]
	{
		@amount = 4
        @maxAmount = 4
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 60
        @maxAmount *= 60
	}
	@RESOURCE[Water]
	{
		@amount = 4
        @maxAmount = 4
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 60
        @maxAmount *= 60
	}
	@RESOURCE[Oxygen]
	{
		@amount = 4
        @maxAmount = 4
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 60
        @maxAmount *= 60
	}
}

@PART[Benjee10_MMSEV]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//2 week sortie for 2 kerbals
	//3 days redundancy
	
	@RESOURCE[Food]
	{
		@amount = 2
        @maxAmount = 2
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 17
        @maxAmount *= 17
	}
	@RESOURCE[Water]
	{
		@amount = 2
        @maxAmount = 2
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 17
        @maxAmount *= 17
	}
	@RESOURCE[Oxygen]
	{
		@amount = 2
        @maxAmount = 2
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 17
        @maxAmount *= 17
	}
}

@PART[Benjee10_MMSEV_monopropSled]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//enough for 1 day
	
	@RESOURCE[ElectricCharge]
	{
		@amount = 5000
        @maxAmount = 5000
	}
}

@PART[Benjee10_MMSEV_baseHDU_hab]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//6 month sortie for 3 kerbals
	//1 month redundancy
	
	@RESOURCE[Food]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 210
        @maxAmount *= 210
	}
	@RESOURCE[Water]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 30
        @maxAmount *= 210
	}
	@RESOURCE[Oxygen]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 210
        @maxAmount *= 210
	}
}

@PART[Benjee10_MMSEV_baseHabShort]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//5 days sortie for 1 kerbal
	
	@RESOURCE[Food]
	{
        @amount = #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount = #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 5
        @maxAmount *= 5
	}
	@RESOURCE[Water]
	{
        @amount = #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount = #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 5
        @maxAmount *= 5
	}
	@RESOURCE[Oxygen]
	{
        @amount = #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount = #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 5
        @maxAmount *= 5
	}
}

@PART[Benjee10_MMSEV_baseHabLong]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//2 weeks sortie for 1 kerbal
	
	@RESOURCE[Food]
	{
        @amount = #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount = #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 14
        @maxAmount *= 14
	}
	@RESOURCE[Water]
	{
        @amount = #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount = #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 14
        @maxAmount *= 14
	}
	@RESOURCE[Oxygen]
	{
        @amount = #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount = #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 14
        @maxAmount *= 14
	}
}

@PART[Benjee10_MMSEV_logisticslong]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//enough for a 9 month sortie for 3 kerbals
	
	@RESOURCE[Food]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 275
        @maxAmount *= 275
	}
	@RESOURCE[Water]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 105
        @maxAmount *= 275
	}
	@RESOURCE[Oxygen]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 275
        @maxAmount *= 275
	}
}

@PART[Benjee10_MMSEV_logisticsShort]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//enough for a 2.25 month (9 weeks, 55 days) sortie for 3 kerbals
	
	@RESOURCE[Food]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/FOOD$
        @amount *= 55
        @maxAmount *= 55
	}
	@RESOURCE[Water]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/WATER$
        @amount *= 20
        @maxAmount *= 55
	}
	@RESOURCE[Oxygen]
	{
		@amount = 3
        @maxAmount = 3
        @amount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @maxAmount *= #$@WALLUMCONFIG/LIFESUPPORT/OXYGEN$
        @amount *= 55
        @maxAmount *= 55
	}
}




@PART[Benjee10_MMSEV_baseNode_vertical,Benjee10_MMSEV_crewTube0,Benjee10_MMSEV_crewTube1,Benjee10_MMSEV_crewTube2,Benjee10_MMSEV_baseNode1-25,Benjee10_MMSEV_base_TNode1-25]:NEEDS[Benjee10_MMSEV,ProfileDefault]:AFTER[KerbalismDefault]
{
	//remove supplies in tunnels
	
	!RESOURCE[Food] {}
	!RESOURCE[Water] {}
	!RESOURCE[Oxygen] {}
	!RESOURCE[Waste] {}
	!RESOURCE[WasteWater] {}
	!RESOURCE[CarbonDioxide] {}
}