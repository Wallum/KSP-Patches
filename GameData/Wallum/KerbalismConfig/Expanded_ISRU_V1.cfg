// ============================================================================
// Add Hydrate splitter to ISRU chemical plants
// ============================================================================
@PART[kerbalism-chemicalplant,MiniISRU,ISRU]:HAS[@MODULE[Configure]:HAS[!SETUP[Ore?Refinery]]]:NEEDS[ProfileDefault,!RationalResources,Wallum]:AFTER[Wallum]
{
	MODULE
	{
		name = ProcessController
		resource = _OreRefinery
		title = Ore Refinery
		capacity = 1
	}

	@MODULE[Configure]
	{
		SETUP
		{
			name = Ore Refinery
			desc = Refines <b>Ore</b> into <b>Metal Ore</b>.
			tech = advScienceTech

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _OreRefinery
			}
		}
	}
}

@PART[kerbalism-chemicalplant,MiniISRU,ISRU]:HAS[@MODULE[Configure]:HAS[!SETUP[Metal?Smelter]]]:NEEDS[ProfileDefault,ExtraplanetaryLaunchpads,!RationalResources,Wallum]:AFTER[Wallum]
{
	MODULE
	{
		name = ProcessController
		resource = _MetalSmelter
		title = Metal Smelter
		capacity = 1
	}

	@MODULE[Configure]
	{
		SETUP
		{
			name = Metal Smelter
			desc = Smelts <b>Metal Ore</b> into <b>Metal</b>.
			tech = advScienceTech

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MetalSmelter
			}
		}
	}
}

@PART[kerbalism-chemicalplant,MiniISRU,ISRU]:HAS[@MODULE[Configure]:HAS[!SETUP[Milling?Machine]]]:NEEDS[ProfileDefault,ExtraplanetaryLaunchpads,!RationalResources,Wallum]:AFTER[Wallum]
{
	MODULE
	{
		name = ProcessController
		resource = _MillingMachine
		title = Milling Machine
		capacity = 1
	}

	@MODULE[Configure]
	{
		SETUP
		{
			name = Milling Machine
			desc = Casts <b>Metal</b> into <b>Rocket Parts</b>.
			tech = advScienceTech

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MillingMachine
			}
		}
	}
}

@PART[kerbalism-chemicalplant]:NEEDS[ProfileDefault,!RationalResources]:AFTER[Wallum]
{
	@MODULE[ProcessController]:HAS[#title[Ore?Refinery]]{@capacity = 2.0}
	@MODULE[ProcessController]:HAS[#title[Metal?Smelter]]:NEEDS[ExtraplanetaryLaunchpads]{@capacity = 2.0}
	@MODULE[ProcessController]:HAS[#title[Milling?Machine]]:NEEDS[ExtraplanetaryLaunchpads]{@capacity = 2.0}
}

@PART[MiniISRU]:NEEDS[ProfileDefault,!RationalResources]:AFTER[Wallum]
{
	@MODULE[ProcessController]:HAS[#title[Ore?Refinery]]{@capacity = 36}
	@MODULE[ProcessController]:HAS[#title[Metal?Smelter]]:NEEDS[ExtraplanetaryLaunchpads]{@capacity = 36}
	@MODULE[ProcessController]:HAS[#title[Milling?Machine]]:NEEDS[ExtraplanetaryLaunchpads]{@capacity = 36}
}

@PART[ISRU]:NEEDS[ProfileDefault,!RationalResources]:AFTER[Wallum]
{
	@MODULE[ProcessController]:HAS[#title[Ore?Refinery]]{@capacity = 90}
	@MODULE[ProcessController]:HAS[#title[Metal?Smelter]]:NEEDS[ExtraplanetaryLaunchpads]{@capacity = 90}
	@MODULE[ProcessController]:HAS[#title[Milling?Machine]]:NEEDS[ExtraplanetaryLaunchpads]{@capacity = 90}
}